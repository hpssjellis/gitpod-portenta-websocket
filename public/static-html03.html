<!DOCTYPE html>
<html>
<head>
  <title>WebSocket Server</title>
</head>
<body>
  <h1>WebSocket Server v-0.2.1-11</h1>
  <p>This page acts as a WebSocket server.</p>
  Remember use "wss://" not "https" it might auto change<br>
<input size=90 type=text id="myGitpod" value="wss://8080-hpssjellis-gitpodporten-a5upxzgpswe.ws-us78.gitpod.io/" onChange="{
   document.getElementById('myGitpod').value.replace('/https/g', 'wss')                                                                                                                       
   document.getElementById('myGitpod').value.replace('/http/g', 'wss')                                                                                                                                                                                                             
}"><br>
<input type=button value="connect" onclick="{
    // Create a new WebSocket
    const document.myWebSocket = new WebSocket(document.getElementById('myGitpod').value);

    // Handle incoming messages
    document.myWebSocket.onmessage = function(event) {
                                            
        if (event.data instanceof Blob) {
        reader = new FileReader();

        reader.onload = () => {
            console.log('Result: ' + reader.result);
            var output = document.getElementById(/myDiv01).innerHTML += 'reader.result: '+ reader.result + '<br>';
        };

        reader.readAsText(event.data);
    } else {
        console.log('Result: ' + event.data);
        var output = document.getElementById('myDiv01').innerHTML += 'event.data: '+ event.data + '<br>';
    }
                                     
                                            
                                            
                                            
                                            
     // console.log('Received message:', event.data);
    //  document.getElementById('myDiv01').innerHTML = event.data + '<br>' + document.getElementById('myDiv01').innerHTML 
    }
}"><br>
  
  <input id="mySend" type=text value="Hello Socket World"><br>
  <input type=button value="Send" onclick="{

    // send message
    document.myWebSocket.send(document.getElementById('mySend').value)
    console.log( 'Sent message: ' + document.getElementById('mySend').value );


}"><br>
  <div id="myDiv01"></div>
  
</body>
</html>
